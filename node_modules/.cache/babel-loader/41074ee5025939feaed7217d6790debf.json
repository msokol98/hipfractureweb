{"ast":null,"code":"import _slicedToArray from\"/home/msokol/Projects/quizmaker/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import FormTemplate from'./form';import{apiHost}from'config';import axios from'axios';import isLoggedIn from'utils/isLoggedIn';var LoginForm=function LoginForm(){if(isLoggedIn())window.location=\"/portal\";var login=function login(authRequest){axios.post(\"\".concat(apiHost,\"/authenticate\"),authRequest).then(function(response){var jwt=response.data.jwt;localStorage.setItem('jwt',jwt);window.location='/portal';}).catch(function(){setError(true);});};var fields={email:{displayName:\"Email\",type:\"email\",value:\"\"},password:{displayName:\"Password\",type:\"password\",value:\"\"}};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];return/*#__PURE__*/_jsx(FormTemplate,{fields:fields,submit:login,header:\"Sign In\",serverErrorMessage:\"Wrong username or password\",error:error});};export default LoginForm;","map":{"version":3,"sources":["/home/msokol/Projects/quizmaker/web/src/components/auth/login.js"],"names":["React","useState","FormTemplate","apiHost","axios","isLoggedIn","LoginForm","window","location","login","authRequest","post","then","response","jwt","data","localStorage","setItem","catch","setError","fields","email","displayName","type","value","password","error"],"mappings":"qMAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,YAAP,KAAyB,QAAzB,CACA,OAASC,OAAT,KAAwB,QAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAEpB,GAAGD,UAAU,EAAb,CACIE,MAAM,CAACC,QAAP,CAAkB,SAAlB,CAEJ,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAAAC,WAAW,CAAI,CACzBN,KAAK,CAACO,IAAN,WAAcR,OAAd,kBAAsCO,WAAtC,EAAmDE,IAAnD,CAAwD,SAAAC,QAAQ,CAAI,CAChE,GAAMC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,IAAT,CAAcD,GAA1B,CACAE,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BH,GAA5B,EACAP,MAAM,CAACC,QAAP,CAAkB,SAAlB,CACH,CAJD,EAIGU,KAJH,CAIS,UAAM,CACXC,QAAQ,CAAC,IAAD,CAAR,CACH,CAND,EAOH,CARD,CAUA,GAAMC,CAAAA,MAAM,CAAI,CACZC,KAAK,CAAE,CAAEC,WAAW,CAAE,OAAf,CAAwBC,IAAI,CAAE,OAA9B,CAAuCC,KAAK,CAAE,EAA9C,CADK,CAEZC,QAAQ,CAAE,CAAEH,WAAW,CAAE,UAAf,CAA2BC,IAAI,CAAE,UAAjC,CAA6CC,KAAK,CAAE,EAApD,CAFE,CAAhB,CAfoB,cAoBMvB,QAAQ,CAAC,KAAD,CApBd,wCAoBbyB,KApBa,eAoBNP,QApBM,eAsBpB,mBACI,KAAC,YAAD,EACI,MAAM,CAAEC,MADZ,CAEI,MAAM,CAAEX,KAFZ,CAGI,MAAM,CAAC,SAHX,CAII,kBAAkB,CAAC,4BAJvB,CAKI,KAAK,CAAEiB,KALX,EADJ,CAUH,CAhCD,CAkCA,cAAepB,CAAAA,SAAf","sourcesContent":["import React, { useState } from 'react';\nimport FormTemplate from './form';\nimport { apiHost } from 'config';\nimport axios from 'axios';\nimport isLoggedIn from 'utils/isLoggedIn';\n\nconst LoginForm = () => {\n\n    if(isLoggedIn())\n        window.location = \"/portal\";\n\n    const login = authRequest => {\n        axios.post(`${apiHost}/authenticate`, authRequest).then(response => {\n            const jwt = response.data.jwt;\n            localStorage.setItem('jwt', jwt);\n            window.location = '/portal';\n        }).catch(() => {\n            setError(true);\n        })\n    };\n\n    const fields =  {\n        email: { displayName: \"Email\", type: \"email\", value: \"\" },\n        password: { displayName: \"Password\", type: \"password\", value: \"\" }\n    };\n\n    const [error, setError] = useState(false);\n\n    return (\n        <FormTemplate \n            fields={fields} \n            submit={login}  \n            header=\"Sign In\"\n            serverErrorMessage=\"Wrong username or password\"\n            error={error}\n        />\n    )\n\n};\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}